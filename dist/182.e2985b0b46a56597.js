"use strict";(self.webpackChunksky_calendar_app=self.webpackChunksky_calendar_app||[]).push([[182],{5182:function(ke,C,l){l.r(C),l.d(C,{AuthLayoutModule:function(){return Ze}});var g=l(3144),m=l(5671),p=l(4035),d=l(9808),a=l(3075),k=l(4244),h=l(7556),e=l(7154),P=new k.N0,y=function(){var o=function(){function r(t,n){(0,m.Z)(this,r),this.router=t,this.authService=n}return(0,g.Z)(r,[{key:"canActivate",value:function(){if(console.log("Auth Guard Check Login"),null===localStorage.getItem("user"))return localStorage.clear(),!0;if(P.decodeToken(JSON.parse(localStorage.getItem("user")).token.firstLogin))return localStorage.clear(),!0;switch(console.log("El rol es ",this.authService.getItemToken("role")),this.authService.getItemToken("role")){case"admin":console.log("Entre aca admin"),this.router.navigate(["/calendar-admin"]);break;case"viewer":console.log("Entre aca viewer"),this.router.navigate(["/calendar-view"])}}}]),r}();return o.\u0275fac=function(t){return new(t||o)(e.LFG(p.F0),e.LFG(h.e))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o}(),v=l(5020),O=l(5226),A=l.n(O),_=l(2290);function q(o,r){1&o&&(e.TgZ(0,"small",29),e._uU(1," Debe ingresar un Email valido"),e.qZA())}function F(o,r){1&o&&(e.TgZ(0,"small",30),e._uU(1," Se requiere ingresar Email"),e.qZA())}function I(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,q,2,0,"small",27),e.YNc(2,F,2,0,"small",28),e.qZA()),2&o){var t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.loginForm.controls.username.errors?null:t.loginForm.controls.username.errors.email),e.xp6(1),e.Q6J("ngIf",null==t.loginForm.controls.username.errors?null:t.loginForm.controls.username.errors.required)}}function N(o,r){1&o&&(e.TgZ(0,"small",33),e._uU(1," La longitud minima es 6 caracteres"),e.qZA())}function M(o,r){1&o&&(e.TgZ(0,"small",34),e._uU(1," Se requiere ingresar password"),e.qZA())}function S(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,N,2,0,"small",31),e.YNc(2,M,2,0,"small",32),e.qZA()),2&o){var t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.loginForm.controls.password.errors?null:t.loginForm.controls.password.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==t.loginForm.controls.password.errors?null:t.loginForm.controls.password.errors.required)}}var U=function(){var o=function(){function r(t,n,i,s){(0,m.Z)(this,r),this.authService=t,this.fb=n,this.router=i,this.toastrService=s,this.show_button=!1,this.show_eye=!1}return(0,g.Z)(r,[{key:"ngOnInit",value:function(){localStorage.clear(),this.crearFormularioLogin()}},{key:"showPassword",value:function(){this.show_button=!this.show_button,this.show_eye=!this.show_eye}},{key:"crearFormularioLogin",value:function(){this.loginForm=this.fb.group({username:new a.NI("",[a.kI.required,a.kI.email,a.kI.minLength(6),a.kI.maxLength(50)]),password:new a.NI("",[a.kI.required,a.kI.minLength(6)])})}},{key:"onLogin",value:function(){var n=this;this.authService.login(this.loginForm.value).subscribe({next:function(c){c.message==v.s.MENSAJE_OK?c.firstLogin?n.alertFirstLogin():n.router.navigate("admin"==c.role?["/calendar-admin"]:["/calendar-view"]):n.toastrService.error(c.message,"Error",{timeOut:3e3})},error:function(c){n.toastrService.error("Error al logearse"+c,"Error",{timeOut:3e3})}})}},{key:"alertFirstLogin",value:function(){var n=this;A().fire({title:"Es su primer login",text:"Se recomienda cambiar su contrase\xf1a",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirmar",cancelButtonText:"Cancelar"}).then(function(i){i.isConfirmed?n.router.navigate(["/change-password"]):localStorage.clear()})}}]),r}();return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.e),e.Y36(a.qu),e.Y36(p.F0),e.Y36(_._W))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-login"]],decls:37,vars:7,consts:[[1,"header","bg-primary","py-7","py-lg-8"],[1,"container"],[1,"header-body","text-center","mb-7"],[1,"row","justify-content-center"],[1,"col-lg-5","col-md-6"],[1,"text-white"],[1,"container","mt--8","pb-5"],[1,"col-lg-5","col-md-7"],[1,"card","bg-secondary","shadow","border-0"],[1,"card-header","bg-transparent","pb-5"],[1,"card-body","px-lg-5","py-lg-5"],[1,"text-center","text-muted","mb-4"],["role","form",3,"formGroup","ngSubmit"],[1,"form-group","mb-3"],[1,"input-group","input-group-alternative"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"ni","ni-email-83"],["formControlName","username","maxlength","50","placeholder","Email","type","email",1,"form-control"],[4,"ngIf"],[1,"form-group"],[1,"ni","ni-lock-circle-open"],["formControlName","password","placeholder","Password",1,"form-control",3,"type"],["id","showPassword",1,"input-group-prepend","pointer",3,"click"],["id","eye"],[1,"text-center"],["type","submit",1,"btn","btn-primary","my-4",3,"disabled"],["id","validEmail","class","text-left",4,"ngIf"],["id","requiredEmail","class","text-left",4,"ngIf"],["id","validEmail",1,"text-left"],["id","requiredEmail",1,"text-left"],["id","minLenghtPass","class","text-left",4,"ngIf"],["id","requiredPass","class","text-left",4,"ngIf"],["id","minLenghtPass",1,"text-left"],["id","requiredPass",1,"text-left"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),e._uU(6,"Bienvenido!"),e.qZA()()()()()(),e.TgZ(7,"div",6)(8,"div",3)(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"p"),e._uU(15,"Ingrese sus credenciales"),e.qZA()(),e.TgZ(16,"form",12),e.NdJ("ngSubmit",function(){return n.onLogin()}),e.TgZ(17,"div",13)(18,"div",14)(19,"div",15)(20,"span",16),e._UZ(21,"i",17),e.qZA()(),e._UZ(22,"input",18),e.qZA(),e.YNc(23,I,3,2,"div",19),e.qZA(),e.TgZ(24,"div",20)(25,"div",14)(26,"div",15)(27,"span",16),e._UZ(28,"i",21),e.qZA()(),e._UZ(29,"input",22),e.TgZ(30,"div",23),e.NdJ("click",function(){return n.showPassword()}),e.TgZ(31,"span",16),e._UZ(32,"i",24),e.qZA()()(),e.YNc(33,S,3,2,"div",19),e.qZA(),e.TgZ(34,"div",25)(35,"button",26),e._uU(36,"Ingresar"),e.qZA()()()()()()()()()),2&t&&(e.xp6(16),e.Q6J("formGroup",n.loginForm),e.xp6(7),e.Q6J("ngIf",n.loginForm.controls.username.invalid&&n.loginForm.controls.username.touched),e.xp6(6),e.Q6J("type",n.show_button?"text":"password"),e.xp6(3),e.Tol(n.show_eye?"ni fa fa-eye":"ni fa fa-eye-slash"),e.xp6(1),e.Q6J("ngIf",n.loginForm.controls.password.invalid&&n.loginForm.controls.password.touched),e.xp6(2),e.Q6J("disabled",n.loginForm.invalid))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,a.nD,d.O5],styles:[".text-left[_ngcontent-%COMP%] {\n  color: red;\n}\n\n.pointer[_ngcontent-%COMP%] {\n  cursor: pointer !important;\n}"]}),o}();function J(o,r){1&o&&(e.TgZ(0,"small",35),e._uU(1," La longitud minima es 6 caracteres"),e.qZA())}function L(o,r){1&o&&(e.TgZ(0,"small",36),e._uU(1," Se requiere ingresar contrase\xf1a actual"),e.qZA())}function E(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,J,2,0,"small",33),e.YNc(2,L,2,0,"small",34),e.qZA()),2&o){var t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.changePasswordForm.controls.oldPassword.errors?null:t.changePasswordForm.controls.oldPassword.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==t.changePasswordForm.controls.oldPassword.errors?null:t.changePasswordForm.controls.oldPassword.errors.required)}}function Y(o,r){1&o&&(e.TgZ(0,"small",39),e._uU(1," La longitud minima es 6 caracteres "),e.qZA())}function D(o,r){1&o&&(e.TgZ(0,"small",40),e._uU(1," Se requiere ingresar nueva contrase\xf1a "),e.qZA())}function Q(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Y,2,0,"small",37),e.YNc(2,D,2,0,"small",38),e.qZA()),2&o){var t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.changePasswordForm.controls.newPassword.errors?null:t.changePasswordForm.controls.newPassword.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==t.changePasswordForm.controls.newPassword.errors?null:t.changePasswordForm.controls.newPassword.errors.required)}}function j(o,r){1&o&&(e.TgZ(0,"small",43),e._uU(1," La longitud minima es 6 caracteres"),e.qZA())}function R(o,r){1&o&&(e.TgZ(0,"small",44),e._uU(1," Se requiere ingresar confirmar nueva contrase\xf1a"),e.qZA())}function B(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,j,2,0,"small",41),e.YNc(2,R,2,0,"small",42),e.qZA()),2&o){var t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.changePasswordForm.controls.confirmedPassword.errors?null:t.changePasswordForm.controls.confirmedPassword.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==t.changePasswordForm.controls.confirmedPassword.errors?null:t.changePasswordForm.controls.confirmedPassword.errors.required)}}function H(o,r){1&o&&(e.TgZ(0,"div")(1,"small",45),e._uU(2," La nueva contrase\xf1a y confirmacion contrase\xf1a no coinciden"),e.qZA()())}new k.N0;var G=function(){var o=function(){function r(t,n,i,s){(0,m.Z)(this,r),this.authService=t,this.fb=n,this.router=i,this.toastrService=s,this.diferent=!1,this.show_button=[!1,!1,!1],this.show_eye=[!1,!1,!1]}return(0,g.Z)(r,[{key:"ngOnInit",value:function(){this.crearFormChangePassword()}},{key:"crearFormChangePassword",value:function(){this.changePasswordForm=this.fb.group({oldPassword:new a.NI("",[a.kI.required,a.kI.minLength(6)]),newPassword:new a.NI("",[a.kI.required,a.kI.minLength(6)]),confirmedPassword:new a.NI("",[a.kI.required,a.kI.minLength(6)])})}},{key:"showPassword",value:function(n){switch(n){case 0:this.show_button[0]=!this.show_button[0],this.show_eye[0]=!this.show_eye[0];break;case 1:this.show_button[1]=!this.show_button[1],this.show_eye[1]=!this.show_eye[1];break;case 2:this.show_button[2]=!this.show_button[2],this.show_eye[2]=!this.show_eye[2]}}},{key:"onChangePassword",value:function(){var n=this;this.diferent=!1,this.changePasswordForm.value.newPassword===this.changePasswordForm.value.confirmedPassword?this.authService.changePassword(this.changePasswordForm.value).subscribe({next:function(s){if(s.message==v.s.MENSAJE_OK)if(n.authService.getItemToken("firstLogin"))n.authService.logout(),n.router.navigate(["/login"]),n.toastrService.success("Se cambio con exitosa la contrase\xf1a","Exito",{timeOut:3e3});else switch(n.toastrService.success("Se cambio con exitosa la contrase\xf1a","Exito",{timeOut:3e3}),n.authService.getItemToken("role")){case"admin":n.router.navigate(["/calendar-admin"]);break;case"estudiante":n.router.navigate(["/calendar-view"])}else n.toastrService.error(s.message,"Error",{timeOut:3e3})},error:function(s){n.toastrService.error("Error al cambiar contrase\xf1a "+s,"Error",{timeOut:5e3})}}):this.diferent=!0}},{key:"retrocederFirstLogin",value:function(){if(this.authService.getItemToken("firstLogin"))this.authService.logout(),this.router.navigate(["/login"]);else switch(this.authService.getItemToken("role")){case"admin":this.router.navigate(["/calendar-admin"]);break;case"viewer":this.router.navigate(["/calendar-view"])}}}]),r}();return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.e),e.Y36(a.qu),e.Y36(p.F0),e.Y36(_._W))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-change-password"]],decls:53,vars:15,consts:[[1,"header","bg-primary","py-7","py-lg-8"],[1,"container"],[1,"header-body","text-center","mb-7"],[1,"row","justify-content-center"],[1,"col-lg-5","col-md-6"],[1,"text-white"],[1,"separator","separator-bottom","separator-skew","zindex-100"],["x","0","y","0","viewBox","0 0 2560 100","preserveAspectRatio","none","version","1.1","xmlns","http://www.w3.org/2000/svg"],["points","2560 0 2560 100 0 100",1,"fill-default"],[1,"container","mt--8","pb-5"],[1,"col-lg-6","col-md-8"],[1,"card","bg-secondary","shadow","border-0"],[1,"card-body","px-lg-5","py-lg-5"],["role","form",3,"formGroup","ngSubmit"],[1,"form-group"],[1,"input-group","input-group-alternative","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"ni","ni-lock-circle-open"],["formControlName","oldPassword","placeholder","Contrase\xf1a Actual",1,"form-control",3,"type"],["id","showOldPassword",1,"input-group-prepend","pointer",3,"click"],["id","eyeOldPassword"],[4,"ngIf"],["formControlName","newPassword","placeholder","Nueva Contrase\xf1a",1,"form-control",3,"type"],["id","showNewPassword",1,"input-group-prepend","pointer",3,"click"],["id","eyeNewPassword"],[1,"input-group","input-group-alternative"],["formControlName","confirmedPassword","placeholder","Confirme Nueva Contrase\xf1a",1,"form-control",3,"type"],["id","showConfirmPassword",1,"input-group-prepend","pointer",3,"click"],["id","eyeConfirmPassword"],[1,"text-center"],["id","atras","type","button",1,"btn","btn-secondary","mt-4",3,"click"],["type","submit",1,"btn","btn-primary","mt-4",3,"disabled"],["id","msgOldPasswordMin","class","text-left",4,"ngIf"],["id","msgOldPasswordReq","class","text-left",4,"ngIf"],["id","msgOldPasswordMin",1,"text-left"],["id","msgOldPasswordReq",1,"text-left"],["id","msgNewPassMin","class","text-left",4,"ngIf"],["id","msgNewPassReq","class","text-left",4,"ngIf"],["id","msgNewPassMin",1,"text-left"],["id","msgNewPassReq",1,"text-left"],["id","msgConfirPassMin","class","text-left",4,"ngIf"],["id","msgConfirPassReq","class","text-left",4,"ngIf"],["id","msgConfirPassMin",1,"text-left"],["id","msgConfirPassReq",1,"text-left"],["id","samePass",1,"text-left"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"strong")(6,"h1",5),e._uU(7,"Cambio de Contrase\xf1a"),e.qZA()()()()()(),e.TgZ(8,"div",6),e.O4$(),e.TgZ(9,"svg",7),e._UZ(10,"polygon",8),e.qZA()()(),e.kcU(),e.TgZ(11,"div",9)(12,"div",3)(13,"div",10)(14,"div",11)(15,"div",12)(16,"form",13),e.NdJ("ngSubmit",function(){return n.onChangePassword()}),e.TgZ(17,"div",14)(18,"div",15)(19,"div",16)(20,"span",17),e._UZ(21,"i",18),e.qZA()(),e._UZ(22,"input",19),e.TgZ(23,"div",20),e.NdJ("click",function(){return n.showPassword(0)}),e.TgZ(24,"span",17),e._UZ(25,"i",21),e.qZA()()(),e.YNc(26,E,3,2,"div",22),e.qZA(),e.TgZ(27,"div",14)(28,"div",15)(29,"div",16)(30,"span",17),e._UZ(31,"i",18),e.qZA()(),e._UZ(32,"input",23),e.TgZ(33,"div",24),e.NdJ("click",function(){return n.showPassword(1)}),e.TgZ(34,"span",17),e._UZ(35,"i",25),e.qZA()()(),e.YNc(36,Q,3,2,"div",22),e.qZA(),e.TgZ(37,"div",14)(38,"div",26)(39,"div",16)(40,"span",17),e._UZ(41,"i",18),e.qZA()(),e._UZ(42,"input",27),e.TgZ(43,"div",28),e.NdJ("click",function(){return n.showPassword(2)}),e.TgZ(44,"span",17),e._UZ(45,"i",29),e.qZA()()(),e.YNc(46,B,3,2,"div",22),e.qZA(),e.YNc(47,H,3,0,"div",22),e.TgZ(48,"div",30)(49,"button",31),e.NdJ("click",function(){return n.retrocederFirstLogin()}),e._uU(50,"Atras"),e.qZA(),e.TgZ(51,"button",32),e._uU(52,"Cambiar Contrase\xf1a"),e.qZA()()()()()()()()),2&t&&(e.xp6(16),e.Q6J("formGroup",n.changePasswordForm),e.xp6(6),e.Q6J("type",n.show_button[0]?"text":"password"),e.xp6(3),e.Tol(n.show_eye[0]?"ni fa fa-eye":"ni fa fa-eye-slash"),e.xp6(1),e.Q6J("ngIf",n.changePasswordForm.controls.oldPassword.invalid&&n.changePasswordForm.controls.oldPassword.touched),e.xp6(6),e.Q6J("type",n.show_button[1]?"text":"password"),e.xp6(3),e.Tol(n.show_eye[1]?"ni fa fa-eye":"ni fa fa-eye-slash"),e.xp6(1),e.Q6J("ngIf",n.changePasswordForm.controls.newPassword.invalid&&n.changePasswordForm.controls.newPassword.touched),e.xp6(6),e.Q6J("type",n.show_button[2]?"text":"password"),e.xp6(3),e.Tol(n.show_eye[2]?"ni fa fa-eye":"ni fa fa-eye-slash"),e.xp6(1),e.Q6J("ngIf",n.changePasswordForm.controls.confirmedPassword.invalid&&n.changePasswordForm.controls.confirmedPassword.touched),e.xp6(1),e.Q6J("ngIf",n.diferent),e.xp6(4),e.Q6J("disabled",n.changePasswordForm.invalid))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,d.O5],styles:[".text-left[_ngcontent-%COMP%] {\n  color: red;\n}"]}),o}(),z=l(6951),V=l(7762),w=l(1134),K=l(5904),$=l(2340),X=l(6165),f=l(8274),b=l(1793);function W(o,r){if(1&o){var t=e.EpF();e.TgZ(0,"ul",35)(1,"li",36),e.NdJ("click",function(){return e.CHM(t),e.oxw().suscribeToNotifications()}),e.TgZ(2,"a",37),e._UZ(3,"i",38),e.TgZ(4,"span"),e._uU(5,"Activar notificaciones"),e.qZA()()(),e.TgZ(6,"li",39),e.NdJ("click",function(){return e.CHM(t),e.oxw().saveTracking()}),e.TgZ(7,"a",37),e._UZ(8,"i",40),e.TgZ(9,"span"),e._uU(10,"Guardar Tramite"),e.qZA()()(),e.TgZ(11,"li",41),e.NdJ("click",function(){return e.CHM(t),e.oxw().listHistory()}),e.TgZ(12,"a",37),e._UZ(13,"i",42),e.TgZ(14,"span"),e._uU(15,"Ver historial"),e.qZA()()()()}}function ee(o,r){1&o&&(e.TgZ(0,"small",45),e._uU(1," La longitud minima es 14 caracteres"),e.qZA())}function te(o,r){1&o&&(e.TgZ(0,"small",46),e._uU(1," Se requiere ingresar N\xb0 Tramite para seguimiento"),e.qZA())}function ne(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,ee,2,0,"small",43),e.YNc(2,te,2,0,"small",44),e.qZA()),2&o){var t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.trackingForm.controls.idDocTramite.errors?null:t.trackingForm.controls.idDocTramite.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==t.trackingForm.controls.idDocTramite.errors?null:t.trackingForm.controls.idDocTramite.errors.required)}}function oe(o,r){1&o&&(e.TgZ(0,"small",49),e._uU(1," La longitud minima es 8 caracteres"),e.qZA())}function re(o,r){1&o&&(e.TgZ(0,"small",50),e._uU(1," Se requiere ingresar dni para seguimiento"),e.qZA())}function ie(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,oe,2,0,"small",47),e.YNc(2,re,2,0,"small",48),e.qZA()),2&o){var t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.trackingForm.controls.dni.errors?null:t.trackingForm.controls.dni.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==t.trackingForm.controls.dni.errors?null:t.trackingForm.controls.dni.errors.required)}}var ae=function(r){return{"job-inprogress is-active observado":r}};function se(o,r){if(1&o&&(e.TgZ(0,"li",57),e._uU(1," OBSERVADO "),e.qZA()),2&o){var t=e.oxw(2);e.Q6J("ngClass",e.VKq(1,ae,"OBSERVADO"==t.listaDetalles[0].estado))}}var x=function(r){return{"job-inprogress is-active negative":r}},le=function(r){return{"job-inprogress is-active finalizado":r}};function ce(o,r){if(1&o&&(e.TgZ(0,"div"),e._UZ(1,"br"),e.TgZ(2,"div",51)(3,"ul",52)(4,"li",53),e._uU(5," REGISTRADO "),e.qZA(),e.TgZ(6,"li",54),e._uU(7," PROCESANDO"),e.qZA(),e.YNc(8,se,2,3,"li",55),e.TgZ(9,"li",56),e._uU(10," FINALIZADO "),e.qZA()()(),e._UZ(11,"br"),e.qZA()),2&o){var t=e.oxw();e.xp6(4),e.Q6J("ngClass",e.VKq(4,x,"REGISTRADO"==t.listaDetalles[0].estado)),e.xp6(2),e.Q6J("ngClass",e.VKq(6,x,"PROCESANDO"==t.listaDetalles[0].estado)),e.xp6(2),e.Q6J("ngIf","OBSERVADO"==t.listaDetalles[0].estado),e.xp6(1),e.Q6J("ngClass",e.VKq(8,le,"FINALIZADO"==t.listaDetalles[0].estado))}}function de(o,r){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()),2&o){var t=r.$implicit;e.xp6(2),e.Oqu(t.fecha),e.xp6(2),e.Oqu(t.estado),e.xp6(2),e.Oqu(t.observaciones)}}function ue(o,r){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",33)(4,"a",63),e._UZ(5,"i",64),e.qZA()()()),2&o){var t=r.$implicit;e.xp6(2),e.Oqu(t.FECHA),e.xp6(2),e.s9C("href",t.URL,e.LSH)}}function ge(o,r){if(1&o&&(e.TgZ(0,"tbody"),e.YNc(1,ue,6,2,"tr",34),e.qZA()),2&o){var t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.listaAdjuntos)}}function me(o,r){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",33)(4,"a",63),e._UZ(5,"i",65),e.qZA()()()),2&o){var t=r.$implicit;e.xp6(2),e.Oqu(t.fecha),e.xp6(2),e.s9C("href",t.url,e.LSH)}}function pe(o,r){if(1&o&&(e.TgZ(0,"tbody"),e.YNc(1,me,6,2,"tr",34),e.qZA()),2&o){var t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.listaCertificado)}}function fe(o,r){if(1&o&&(e.TgZ(0,"ul",58)(1,"tabset",59)(2,"tab",60)(3,"div",30)(4,"table",31)(5,"thead",32)(6,"tr")(7,"th"),e._uU(8,"Fecha"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Estado"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Observacion"),e.qZA()()(),e.TgZ(13,"tbody"),e.YNc(14,de,7,3,"tr",34),e.qZA()()()(),e.TgZ(15,"tab",61)(16,"div",30)(17,"table",31)(18,"thead",32)(19,"tr")(20,"th"),e._uU(21,"Fecha"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Descargar"),e.qZA()()(),e.YNc(24,ge,2,1,"tbody",20),e.qZA()()(),e.TgZ(25,"tab",62)(26,"div",30)(27,"table",31)(28,"thead",32)(29,"tr")(30,"th"),e._uU(31,"Fecha"),e.qZA(),e.TgZ(32,"th"),e._uU(33,"Descargar"),e.qZA()()(),e.YNc(34,pe,2,1,"tbody",20),e.qZA()()()()()),2&o){var t=e.oxw();e.xp6(14),e.Q6J("ngForOf",t.listaDetalles),e.xp6(10),e.Q6J("ngIf",t.adjuntoOk),e.xp6(10),e.Q6J("ngIf",t.certificadoOk)}}function he(o,r){if(1&o){var t=e.EpF();e.TgZ(0,"tr")(1,"td",66),e._uU(2),e.qZA(),e.TgZ(3,"td",66),e._uU(4),e.qZA(),e.TgZ(5,"td",67)(6,"i",68),e.NdJ("click",function(){var c=e.CHM(t).$implicit;return e.oxw().searchHistory(c)}),e.qZA()()()}if(2&o){var n=r.$implicit;e.xp6(2),e.Oqu(n.id_est_doc),e.xp6(2),e.Oqu(n.dni)}}var _e=[{path:"tracking",component:function(){var o=function(){function r(t,n,i,s,c){(0,m.Z)(this,r),this.fb=t,this.servicios=n,this.toastrService=i,this.swPush=s,this.route=c,this.listaAdjuntos=[],this.listaCertificado=[],this.adjuntoOk=!1,this.certificadoOk=!1,this.detalleOk=!1,this.listaTramitesGuardados=[]}return(0,g.Z)(r,[{key:"ngOnInit",value:function(){this.crearFormularioTracking(),this.suscribirClickPush()}},{key:"crearFormularioTracking",value:function(){this.trackingForm=this.fb.group({idDocTramite:new a.NI("",[a.kI.required,a.kI.minLength(14)]),dni:new a.NI("",[a.kI.required,a.kI.minLength(8),a.kI.maxLength(8)])})}},{key:"formatData",value:function(n,i){return{id_est_doc:i,tokenPush:n}}},{key:"suscribirClickPush",value:function(){var n=this;this.route.queryParams.subscribe(function(i){void 0!==typeof i.idDocTramite&&void 0!==typeof i.dni&&0!==Object.entries(i).length&&(n.trackingForm.controls.idDocTramite.setValue(i.idDocTramite),n.trackingForm.controls.dni.setValue(i.dni),n.buscarTramiteTracking())})}},{key:"saveTracking",value:function(){this.detalleOk?this.trackingForm.valid?(this.addEntry(),this.suscribeToNotifications()):this.toastrService.error("Los valores ingresados deben ser validos","Error",{timeOut:5e3}):this.toastrService.error("Debe realizar una busqueda para guardar el tramite","Error",{timeOut:5e3})}},{key:"suscribeToNotifications",value:function(){var n=this;console.log("suscribeToNotifications"),this.swPush.requestSubscription({serverPublicKey:$.N.VAPID_PUBLIC_KEY}).then(function(i){console.log("Request Tokens Subscription"),n.saveNotification(i)}).catch(function(i){console.log("Error al suscribirse",i),n.toastrService.error("Sucedio un error al suscribirse ","Error",{timeOut:5e3})})}},{key:"addEntry",value:function(){var n=JSON.parse(localStorage.getItem("tracking"));null==n&&(n=[]),n.push({id_est_doc:this.trackingForm.value.idDocTramite,dni:this.trackingForm.value.dni});var s={};n=n.filter(function(c){var u=!s[c.id_est_doc];return s[c.id_est_doc]=!0,u}),console.log("existen "+n),localStorage.setItem("tracking",JSON.stringify(n)),this.toastrService.success("Se guardo su tramite","Exito",{timeOut:5e3})}},{key:"saveNotification",value:function(n){var i=this,s=JSON.parse(localStorage.getItem("tracking"));if(null!==s){var u,c=(0,V.Z)(s);try{for(c.s();!(u=c.n()).done;)this.servicios.saveUserNotification(this.formatData(n,u.value.id_est_doc)).subscribe({next:function(Z){Z.message==v.s.MENSAJE_OK?i.toastrService.success("Las notificaciones fueron habilitadas exitosamente","Exito",{timeOut:5e3}):i.toastrService.error("Sucedio un error al suscribir sus notificaciones","Error",{timeOut:5e3})},error:function(Z){i.toastrService.error("Sucedio un error al suscribir sus notificaciones "+Z,"Error",{timeOut:5e3})}})}catch(T){c.e(T)}finally{c.f()}}}},{key:"listHistory",value:function(){this.modalHistory.show(),this.listaTramitesGuardados=JSON.parse(localStorage.getItem("tracking"))}},{key:"searchHistory",value:function(n){this.trackingForm.controls.idDocTramite.setValue(n.id_est_doc),this.trackingForm.controls.dni.setValue(n.dni),this.buscarTramiteTracking()}},{key:"limpiarTabla",value:function(){this.adjuntoOk=!1,this.certificadoOk=!1,this.detalleOk=!1}},{key:"buscarTramiteTracking",value:function(){var n=this;this.limpiarTabla(),this.servicios.buscarTramiteDetalleDniAndId(this.trackingForm.value).subscribe({next:function(s){s.length>0?(n.listaDetalles=s,n.detalleOk=!0,n.leerAdjuntos(),n.leerCertificados()):(n.limpiarTabla(),n.toastrService.error("No existe tramite que coincida con los datos ingresados","Error",{timeOut:5e3}))},error:function(s){n.toastrService.error("Sucedio un error al buscar el tramite "+s,"Error",{timeOut:5e3})}})}},{key:"leerAdjuntos",value:function(){var n=this;this.servicios.buscarAdjuntos(this.trackingForm.value.idDocTramite).subscribe({next:function(s){n.listaAdjuntos=s,n.adjuntoOk=!0},error:function(s){n.toastrService.error(s,"Error",{timeOut:3e3})}})}},{key:"leerCertificados",value:function(){var n=this;this.servicios.buscarCertificado(this.trackingForm.value.idDocTramite).subscribe({next:function(s){n.listaCertificado=s,n.certificadoOk=!0},error:function(s){n.toastrService.error(s,"Error",{timeOut:5e3})}})}}]),r}();return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.qu),e.Y36(K.C),e.Y36(_._W),e.Y36(X.Mk),e.Y36(p.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-tracking"]],viewQuery:function(t,n){var i;1&t&&e.Gf(w.oB,5),2&t&&e.iGM(i=e.CRH())&&(n.modalHistory=i.first)},decls:57,vars:8,consts:[[1,"header","bg-primary","pb-8","pt-5","pt-md-8"],[1,"container-fluid"],[1,"header-body"],[1,"container-fluid","mt--7"],["id","hamburgerButton"],["dropdown","",1,"btn-group",3,"dropup"],["id","button-dropup","dropdownToggle","","type","button","aria-controls","dropdown-dropup",1,"fa","fa-bars","fa-2x"],["id","dropdown-dropup","class","dropdown-menu","role","menu","aria-labelledby","button-dropup",4,"dropdownMenu"],[1,"row"],[1,"col"],[1,"card","shadow"],[1,"card-header","border-0"],[1,"mb-0","text-center"],[1,"border","p-3","form",3,"formGroup"],[1,"row","d-flex","justify-content-center"],[1,"col-lg-4","d-flex","justify-content-center"],["type","text","placeholder","N\xb0 Tramite","formControlName","idDocTramite","maxlength","30",1,"form-control"],["type","text","placeholder","DNI Estudiante","formControlName","dni","maxlength","8","oninput","process(this)","minlength","8",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[1,"fas","fa-search"],[4,"ngIf"],["class","nav nav-tabs","id","myTab","role","tablist",4,"ngIf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","dialog-static-name",1,"modal","fade"],["modalHistory","bs-modal"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","dialog-static-name",1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"table-responsive"],[1,"table","table-bordered"],[1,"thead-light"],[1,"text-center"],[4,"ngFor","ngForOf"],["id","dropdown-dropup","role","menu","aria-labelledby","button-dropup",1,"dropdown-menu"],["role","menuitem","id","activarNotificaciones",3,"click"],[1,"dropdown-item"],[1,"fas","fa-bell","fa-2x"],["role","menuitem","id","guardar",3,"click"],[1,"fas","fa-save","fa-2x"],["role","menuitem","id","historial",3,"click"],[1,"fas","fa-history","fa-2x"],["id","minlengthTramite","class","text-left",4,"ngIf"],["id","reqlengthTramite","class","text-left",4,"ngIf"],["id","minlengthTramite",1,"text-left"],["id","reqlengthTramite",1,"text-left"],["id","minLenghtDNI","class","text-left",4,"ngIf"],["id","reqDNI","class","text-left",4,"ngIf"],["id","minLenghtDNI",1,"text-left"],["id","reqDNI",1,"text-left"],[1,"row","multi-steps-wrap"],[1,"list-unstyled","multi-steps"],[1,"job-status","job-created",3,"ngClass"],[1,"job-status",3,"ngClass"],["class","job-status job-completed ",3,"ngClass",4,"ngIf"],[1,"job-status","job-closed",3,"ngClass"],[1,"job-status","job-completed",3,"ngClass"],["id","myTab","role","tablist",1,"nav","nav-tabs"],[1,"table"],["heading","Detalles","id","tab1"],["heading","Adjuntos","id","tab2"],["heading","Certificado","id","tab3"],["target","_blank",3,"href"],[1,"ni","ni-cloud-download-95"],[1,"ni","ni-paper-diploma"],[1,"history"],[1,"history","text-center"],["role","search",1,"fas","fa-search",3,"click"]],template:function(t,n){if(1&t){var i=e.EpF();e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"div",2),e.qZA()(),e._UZ(3,"br")(4,"br"),e.TgZ(5,"div",3)(6,"div",4)(7,"div",5),e._UZ(8,"i",6),e.YNc(9,W,16,0,"ul",7),e.qZA()(),e.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h2",12),e._uU(15,"Seguimiento Tramites"),e.qZA()(),e.TgZ(16,"form",13)(17,"div",14)(18,"div",15),e._UZ(19,"input",16),e.qZA(),e.TgZ(20,"div",15),e._UZ(21,"input",17),e.qZA(),e.TgZ(22,"div",15)(23,"button",18),e.NdJ("click",function(){return n.buscarTramiteTracking()}),e._UZ(24,"i",19),e._uU(25," \xa0Buscar"),e.qZA()()(),e.TgZ(26,"div",14)(27,"div",15),e.YNc(28,ne,3,2,"div",20),e.qZA(),e.TgZ(29,"div",15),e.YNc(30,ie,3,2,"div",20),e.qZA(),e._UZ(31,"div",15),e.qZA()(),e._UZ(32,"br"),e.YNc(33,ce,12,10,"div",20),e.YNc(34,fe,35,3,"ul",21),e.qZA()()(),e.TgZ(35,"div",22,23)(37,"div",24)(38,"div",25)(39,"div",26)(40,"h4",27),e._uU(41,"Tramites Guardados"),e.qZA(),e.TgZ(42,"button",28),e.NdJ("click",function(){return e.CHM(i),e.MAs(36).hide()}),e.TgZ(43,"span",29),e._uU(44,"\xd7"),e.qZA()()(),e.TgZ(45,"div")(46,"div",30)(47,"table",31)(48,"thead",32)(49,"tr")(50,"th"),e._uU(51,"N\xb0 Tramite"),e.qZA(),e.TgZ(52,"th"),e._uU(53,"DNI"),e.qZA(),e._UZ(54,"th",33),e.qZA()(),e.TgZ(55,"tbody"),e.YNc(56,he,7,2,"tr",34),e.qZA()()()()()()()()}2&t&&(e.xp6(7),e.Q6J("dropup",!0),e.xp6(9),e.Q6J("formGroup",n.trackingForm),e.xp6(7),e.Q6J("disabled",n.trackingForm.invalid),e.xp6(5),e.Q6J("ngIf",n.trackingForm.controls.idDocTramite.invalid&&n.trackingForm.controls.idDocTramite.touched),e.xp6(2),e.Q6J("ngIf",n.trackingForm.controls.dni.invalid&&n.trackingForm.controls.dni.touched),e.xp6(3),e.Q6J("ngIf",n.detalleOk),e.xp6(1),e.Q6J("ngIf",n.detalleOk),e.xp6(22),e.Q6J("ngForOf",n.listaTramitesGuardados))},directives:[f.TO,f.Mq,f.Hz,a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,a.nD,a.wO,d.O5,d.mk,b.AH,b.wW,d.sg,w.oB],styles:['@charset "UTF-8";\n.text-left[_ngcontent-%COMP%] {\n  color: red;\n}\n.col-lg-4[_ngcontent-%COMP%] {\n  padding-bottom: 10px;\n}\n@media (max-width: 576px) {\n  .multi-steps-wrap[_ngcontent-%COMP%] {\n    margin: 0;\n  }\n}\n.multi-steps-wrap[_ngcontent-%COMP%]   .multi-steps[_ngcontent-%COMP%] {\n  display: table;\n  table-layout: fixed;\n  width: 100%;\n}\n.multi-steps-wrap[_ngcontent-%COMP%]   .multi-steps[_ngcontent-%COMP%]    > li[_ngcontent-%COMP%] {\n  counter-increment: stepNum;\n  text-align: center;\n  display: table-cell;\n  position: relative;\n  color: #3cba9f;\n  font-size: 12px;\n  z-index: 1;\n}\n.negative[_ngcontent-%COMP%] {\n  border-color: #4b74f8;\n}\n.observado[_ngcontent-%COMP%] {\n  border-color: #df332d;\n}\n.finalizado[_ngcontent-%COMP%] {\n  border-color: #15b33c;\n}\n.multi-steps-wrap[_ngcontent-%COMP%]   .multi-steps[_ngcontent-%COMP%]    > li[_ngcontent-%COMP%]:before {\n  content: "\u2713";\n  display: block;\n  margin: 0 auto 4px;\n  background-color: #fff;\n  width: 46px;\n  height: 46px;\n  line-height: 40px;\n  text-align: center;\n  font-size: 25px;\n  border-width: 2px;\n  border-style: solid;\n  border-color: #3cba9f;\n  border-radius: 50%;\n  font-weight: bold !important;\n}\n.multi-steps-wrap[_ngcontent-%COMP%]   .multi-steps[_ngcontent-%COMP%]    > li[_ngcontent-%COMP%]:after {\n  content: "";\n  height: 2px;\n  width: 100%;\n  background-color: #3cba9f;\n  position: absolute;\n  top: 20px;\n  left: 50%;\n  z-index: -1;\n}\n.multi-steps-wrap[_ngcontent-%COMP%]   .multi-steps[_ngcontent-%COMP%]    > li[_ngcontent-%COMP%]:last-child:after {\n  display: none;\n}\n.multi-steps-wrap[_ngcontent-%COMP%]   .multi-steps[_ngcontent-%COMP%]    > li[_ngcontent-%COMP%]:last-child.is-active:before {\n  content: "\u2713";\n}\n.multi-steps-wrap[_ngcontent-%COMP%]   .multi-steps[_ngcontent-%COMP%]    > li[_ngcontent-%COMP%]:first-child.is-active:before {\n  content: "\u2713";\n}\n.multi-steps-wrap[_ngcontent-%COMP%]   .multi-steps[_ngcontent-%COMP%]    > li.is-active[_ngcontent-%COMP%]:before {\n  background-color: #fff;\n  border-color: #3cba9f;\n}\n.multi-steps-wrap[_ngcontent-%COMP%]   .multi-steps[_ngcontent-%COMP%]    > li.negative[_ngcontent-%COMP%]:before {\n  background-color: #4b74f8;\n  border-color: #4b74f8;\n  color: white;\n}\n.multi-steps-wrap[_ngcontent-%COMP%]   .multi-steps[_ngcontent-%COMP%]    > li.observado[_ngcontent-%COMP%]:before {\n  background-color: #df332d;\n  border-color: #df332d;\n  color: white;\n}\n.multi-steps-wrap[_ngcontent-%COMP%]   .multi-steps[_ngcontent-%COMP%]    > li.finalizado[_ngcontent-%COMP%]:before {\n  background-color: #15b33c;\n  border-color: #15b33c;\n  color: white;\n}\n.multi-steps-wrap[_ngcontent-%COMP%]   .multi-steps[_ngcontent-%COMP%]    > li.is-active[_ngcontent-%COMP%]    ~ li[_ngcontent-%COMP%] {\n  color: #808080;\n}\n.multi-steps-wrap[_ngcontent-%COMP%]   .multi-steps[_ngcontent-%COMP%]    > li.is-active[_ngcontent-%COMP%]    ~ li[_ngcontent-%COMP%]:before {\n  background-color: #eee;\n  border-color: #fff;\n}\n#hamburgerButton[_ngcontent-%COMP%] {\n  padding: 12px 16px;\n  background: linear-gradient(87deg, #f5365c 0, #f56036 100%) !important;\n  position: fixed;\n  bottom: 25px;\n  left: 35px;\n  border-radius: 50%;\n  z-index: 1100;\n}\n#hamburgerButton[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  color: whitesmoke !important;\n}\n#dropdown-dropup[_ngcontent-%COMP%] {\n  background: transparent !important;\n  position: fixed;\n  border-color: transparent !important;\n  border-left-width: 33px;\n  padding-left: 0px;\n  border-bottom-width: 45px;\n  padding-bottom: 0px;\n  padding-top: 0px;\n}\n#dropdown-dropup[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  padding: 8px;\n  border-radius: 50%;\n  background: linear-gradient(87deg, #f5365c 0, #f56036 100%) !important;\n}\n.dropdown-item[_ngcontent-%COMP%] {\n  color: #3991e9 !important;\n  font-weight: bold !important;\n  font-size: 0.95rem !important;\n  background: transparent !important;\n}\n\n.dropdown-menu[_ngcontent-%COMP%] {\n  box-shadow: none !important;\n}\nli[_ngcontent-%COMP%] {\n  cursor: pointer;\n}\ni[_ngcontent-%COMP%] {\n  cursor: pointer;\n}\n.history[_ngcontent-%COMP%] {\n  padding: 8px !important;\n}']}),o}()},{path:"login",component:U,canActivate:[y]},{path:"change-password",component:G,canActivate:[z.C]}],we=l(1520),be=l(8567),Te=l(1321),Ze=function(){var o=(0,g.Z)(function r(){(0,m.Z)(this,r)});return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[d.ez,w.zk.forRoot(),b.P4.forRoot(),p.Bz.forChild(_e),a.u5,we.IJ,a.UX,be.JX,Te.ii.forRoot(),f.mr.forRoot()]]}),o}()}}]);